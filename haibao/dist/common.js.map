{"version":3,"file":"common.js","sources":["webpack:///./src/libs/ajax.js","webpack:///./src/libs/globalData.js","webpack:///./src/libs/mixin.js","webpack:///./src/utils/mtj-wx-sdk.config.js","webpack:///./src/utils/mtj-wx-sdk.js"],"sourcesContent":["import Taro from '@tarojs/taro';\nimport { createCache } from \"./globalData\";\nconst globalData = createCache();\n// c.set(\"test\", 100);\n// console.log(c.get(\"test\"));\n\nconst DOMAIN = 'https://campaign5.method-ad.cn/hypertherm/';\nexport function getOpenid() {\n    return new Promise((resolve, reject) => {\n        var openid = globalData.get(\"openid\");\n        if(openid){\n            resolve(openid);\n        }else{\n            wx.login({\n              success (res) {\n                if (res.code) {\n                  Taro.request({\n                        url: DOMAIN + 'xcx_request.php?rndv='+Math.random() + '&act=getOpenid',\n                        data: {\n                            code:res.code\n                        },\n                        method:'post',\n                        header:{\n                            'Content-Type':'application/x-www-form-urlencoded'\n                        },\n                        success (res) {\n                            if(res.data.status == 1){\n                                globalData.set('openid',res.data.openid);\n                                resolve(res.data.openid);\n                            }\n                        },\n                        fail(e){\n                            reject(e);\n                        }\n                    });\n                } else {\n                  console.log('登录失败！' + res.errMsg)\n                }\n              }\n            });\n        }\n    })\n}\nexport function ajax(options = {}) {\n    return new Promise((resolve, reject) => {\n        getOpenid().then(openid=>{\n            let obj = Object.assign({}, options.data || {}, {openid:openid});\n            Taro.request({\n                url: DOMAIN + options.url + '?rndv='+Math.random() + '&act='+obj.act,\n                data: {...obj,act:options.data.act2 || '' },\n                method:'post',\n                header:{\n                    'Content-Type':'application/x-www-form-urlencoded'\n                },\n                success (res) {\n                    resolve(res.data);\n                },\n                fail(e){\n                    reject(e);\n                }\n            });\n        })\n    })\n};\n","export function createCache() {\n    const globalData = {\n      \n    };\n    return {\n      set(key, val) {\n        globalData[key] = val;\n        wx.setStorageSync(key, val);\n      },\n      get(key) {\n        return wx.getStorageSync(key) || '';\n      }\n    }\n  }\n  ","import { ajax } from \"./ajax\";\n\nexport default {\n  data() {\n    return {\n      containerTop: 0\n    }\n  },\n  beforeDestroy(){\n    this.$store.commit('set_liveLeadsModel');\n    this.$store.commit('set_downloadLeadsModel');\n    this.$store.commit('set_consultLeadsModel');\n  },\n  created() {\n    let menuButtonObject = wx.getMenuButtonBoundingClientRect();\n    this.containerTop = menuButtonObject.height + menuButtonObject.top + 10;\n  },\n  methods: {\n    getOpenId(callback) {\n        let data = {\n          openid: this.openid\n        }\n\n        callback(data)\n    },\n    session(callback) {\n        let data = {\n          sessionFrom: this.userInfo\n        }\n        callback(data)\n    },\n    viewVideo(item) {\n      this.viewVideoSrc = item.video_filename;\n    },\n    toViewPdf(item, tp = 100) {\n      wx.navigateTo({ url: '/pages/pdf/index?src=' + item.pdf_filename + '&title=' + item.title+'&share_picture='+item.pdf_share_picture });\n\n      ajax({\n        url: 'xcx_request.php',\n        data: {\n          act: 'set_File_History',\n          act2: 'read',\n          tp: this.$store.state.category,\n          tp_value: item.class_id || item.tech_detail_id || item.product_id,\n          file_tp: 'pdf',\n          watch_time: 0,\n        },\n      });\n      // wx.downloadFile({\n      //   // 示例 url，并非真实存在\n      //   url:item.pdf_filename,\n      //   success: function (res) {\n      //     const filePath = res.tempFilePath\n      //     wx.openDocument({\n      //       filePath: filePath,\n      //       success: function (res) {\n      //         console.log('打开文档成功')\n      //       }\n      //     })\n      //   }\n      // })\n    },\n    toViewVideo(item, tp = 100) {\n      console.log(item);\n      if(item.category_id == 1){\n        this.$store.commit('set_category',310);\n      }else{\n        this.$store.commit('set_category',320);\n      }\n\n      if(item.appointment_isform == 0 && item.category_id==2){\n        this.$store.commit('set_liveLeadsModel',true);\n        item.tp = tp;\n        this.$store.commit('set_leadsItem',item);\n      }else{\n        wx.navigateTo({ url: '/pages/server/video?title=' + item.title + '&video_filename=' + item.video_filename + '&video_picture=' + item.video_picture + '&share_img=' + item.video_share_picture + '&id=' + (item.class_id || item.tech_detail_id) });\n      }\n    },\n    downloadPdf(item, tp = 100) {\n      console.log(item);\n      this.download_id = item.download_id;\n      this.$store.commit('set_lastTp',2);\n      if(item.pdf_isform > 0){\n        wx.showToast({\n            title: '资料已发送到您的邮箱',\n            icon: 'none',\n            duration: 2000,\n        });\n\n        ajax({\n          url: 'xcx_request.php',\n          data: {\n            act: 'set_File_History',\n            act2: 'download',\n            tp: this.$store.state.category,\n            tp_value: item.class_id || item.tech_detail_id,\n            file_tp: 'pdf',\n            watch_time: 0,\n          },\n        });\n      }else{\n        this.$store.commit('set_downloadLeadsModel',true);\n        item.tp = tp;\n        this.$store.commit('set_leadsItem',item);\n      }\n      // wx.showLoading({\n      //   title: '加载中...',\n      // })\n      // const fileExtName = \".pdf\";\n      // const randfile = new Date().getTime() + fileExtName;\n      // const newPath = `${wx.env.USER_DATA_PATH}/${randfile}`;\n      // wx.downloadFile({\n      //   url: item.pdf_filename,\n      //   filePath: newPath,\n      //   success: res => {\n      //     let filePath = res.tempFilePath;\n      //     wx.openDocument({\n      //       filePath: newPath,\n      //       showMenu: true,\n      //       fileType: 'pdf',\n      //       success: function(res) {}\n      //     })\n      //     wx.hideLoading();\n      //   }\n      // });\n    },\n    downloadVideo(item, tp = 100) {\n      this.$store.commit('set_lastTp',2);\n      wx.showLoading({\n        title: '加载中...',\n      })\n      wx.downloadFile({\n        url: item.video_filename,\n        success: res => {\n          let filePath = res.tempFilePath;\n          console.log(res);\n          wx.saveVideoToPhotosAlbum({\n            filePath: filePath,\n            success: file => {\n              wx.showToast({\n                title: '已保存到相册',\n                icon: 'none',\n                duration: 2000,\n              })\n              wx.hideLoading();\n            },\n            fail: err => {\n              console.log(err)\n              wx.showToast({\n                title: '获取权限失败，将无法保存到相册哦~',\n                icon: 'none',\n                duration: 2000,\n              })\n              wx.hideLoading();\n            }\n          })\n        }\n      });\n\n\n      ajax({\n        url: 'xcx_request.php',\n        data: {\n          act: 'set_File_History',\n          act2: 'download',\n          tp: this.$store.state.category,\n          tp_value: item.class_id || item.tech_detail_id,\n          file_tp: 'video',\n          watch_time: 0,\n        },\n      });\n    }\n  }\n}\n","/**\n * @file 百度移动统计配置文件\n */\n\nmodule.exports = {\n    /**\n     * 从百度移动统计获取的AppKey\n     * @type {string}\n     */\n    appKey: '6b11b27d65',\n\n    /**\n     * 是否使用了插件\n     * @type {boolean}\n     */\n    hasPlugin: true,\n\n    /**\n     * 是否获取当前的地理位置和速度信息\n     * @type {boolean}\n     */\n    getLocation: false,\n};\n","var mtjwxsdk = (function(e) {\n  \"use strict\";\n  function r() {\n    return \"undefined\" != typeof crypto && crypto.getRandomValues\n      ? crypto.getRandomValues(new Uint32Array(1))[0]\n      : Math.floor(4294967295 * Math.random());\n  }\n  function i(e, t) {\n    return \"[object \" + t + \"]\" === {}.toString.call(e);\n  }\n  function o(n) {\n    return (\n      (i(n, \"Object\") || i(n, \"Array\")) &&\n        Object.keys(n).forEach(function(e) {\n          var t = n[e];\n          i(t, \"Object\") || i(t, \"Array\") ? (n[e] = o(t)) : (n[e] = \"\" + t);\n        }),\n      n\n    );\n  }\n  function a(e) {\n    return i(e, \"String\") && /^\\d{11}$/.test(e);\n  }\n  function c(e) {\n    return i(e, \"String\") && 28 === e.length;\n  }\n  function u(e) {\n    return new Promise(function(t, n) {\n      return (\n        (e.data = e.data || {}),\n        A.blacklist &&\n        ((-1 < A.blacklist.indexOf(\"all\") && e.data.et) ||\n          (-1 < A.blacklist.indexOf(\"behavior\") && \"behavior\" === e.data.et))\n          ? t()\n          : ((e.data.v = S),\n            (e.data.rqc = ++U),\n            (function(e) {\n              return JSON.stringify(e).length <= 204800;\n            })(e.data)\n              ? ((e.success = function(e) {\n                  return t(e);\n                }),\n                (e.fail = function(e) {\n                  return n(e);\n                }),\n                void (function(t) {\n                  if (!1 !== A.trackStatus) {\n                    var e = t.data.et\n                      ? {\n                          mtj_ii: t.data.uuid || \"\",\n                          mtj_et: t.data.et,\n                          mtj_en: t.data.en\n                        }\n                      : {};\n                    b.request({\n                      url: t.url,\n                      data: t.data,\n                      header: Object.assign(\n                        { \"content-type\": \"application/json\" },\n                        e,\n                        t.header\n                      ),\n                      method: t.method || \"POST\",\n                      dataType: t.dataType || \"json\",\n                      success: function(e) {\n                        t.success && t.success(e);\n                      },\n                      fail: function(e) {\n                        t.fail && t.fail(e);\n                      }\n                    });\n                  }\n                })(e))\n              : (U--, n(new Error(\"invalid data\"))))\n      );\n    });\n  }\n  function s(e, t) {\n    var n = i(t, \"Object\") ? JSON.stringify(t) : \"\" + t;\n    u({\n      url: w,\n      dataType: \"string\",\n      data: Object.assign({}, q, {\n        et: \"error\",\n        en: e,\n        ep: { ex: n },\n        rid: r()\n      })\n    });\n  }\n  function f(e) {\n    (e.rid = r()), (e.aso = e.aso || {});\n    var t = { url: w, dataType: \"string\", data: Object.assign({}, q, e) };\n    u(t),\n      (M.circleToken || M.circleByThreeFingers) &&\n        ((\"page\" === e.et && \"show\" === e.en) ||\n          (\"behavior\" === e.et && \"tap\" === e.en)) &&\n        ((t.url = \"https://hmma.baidu.com/mini.gif?circle=1\"),\n        (t.data.token = M.circleToken),\n        u(t).catch(function(e) {\n          return console.error(e);\n        }));\n  }\n  function l(e) {\n    try {\n      return b.getStorageSync(e);\n    } catch (e) {\n      s(\"getStorageSync\", e);\n    }\n  }\n  function h(e, t) {\n    try {\n      b.setStorageSync(e, t);\n    } catch (e) {\n      s(\"setStorageSync\", e);\n    }\n  }\n  function t() {\n    return Promise.resolve().then(function() {\n      var e = l(P);\n      return (\n        (i(e, \"String\") && 32 === e.length) ||\n          ((e = ([1e7] + 1e3 + 4e3 + 8e3 + 1e11).replace(/[018]/g, function(e) {\n            return (\n              e ^\n              ((\"undefined\" != typeof crypto && crypto.getRandomValues\n                ? crypto.getRandomValues(new Uint8Array(1))[0]\n                : Math.floor(255 * Math.random())) &\n                (15 >> (e / 4)))\n            ).toString(16);\n          })),\n          h(P, e)),\n        e\n      );\n    });\n  }\n  function p() {\n    return (\n      k ||\n      ((q.sid = r()),\n      (q.rqc = 0),\n      (k = Promise.all([\n        t(),\n        new Promise(function(t) {\n          b.getSystemInfo({\n            success: function(e) {\n              delete e.errMsg, t(e);\n            },\n            fail: function() {\n              t({});\n            }\n          });\n        }),\n        new Promise(function(t) {\n          b.getNetworkType({\n            success: function(e) {\n              delete e.errMsg, t(e);\n            },\n            fail: function() {\n              t({});\n            }\n          });\n        }),\n        Promise.resolve().then(function() {\n          var e = l(I),\n            n = i(e, \"Object\") ? e : {};\n          return new Promise(function(t) {\n            b.getSetting({\n              success: function(e) {\n                e.authSetting && e.authSetting[\"scope.userInfo\"]\n                  ? b.getUserInfo({\n                      success: function(e) {\n                        delete e.userInfo.errMsg,\n                          t(Object.assign(n, e.userInfo));\n                      },\n                      fail: function() {\n                        t(n);\n                      }\n                    })\n                  : t(n);\n              },\n              fail: function() {\n                t(n);\n              }\n            });\n          });\n        }),\n        new Promise(function(t) {\n          if (!A.getLocation) return t({});\n          b.getLocation({\n            type: \"wgs84\",\n            success: function(e) {\n              delete e.errMsg, t(e);\n            },\n            fail: function() {\n              t({});\n            }\n          });\n        }),\n        Promise.resolve().then(function() {\n          var e = l(T);\n          return i(e, \"Object\") ? e : {};\n        })\n      ]).then(function(e) {\n        (q.uuid = e[0]),\n          (N.system = o(e[1])),\n          (N.network = o(e[2])),\n          0 < Object.keys(e[3]).length && (N.user = o(e[3])),\n          0 < Object.keys(e[4]).length && (N.location = o(e[4])),\n          0 < Object.keys(e[5]).length &&\n            (N.userProperty = JSON.stringify(e[5])),\n          \"devtools\" === N.system.platform &&\n            A.latestVersion &&\n            (function(e, t) {\n              for (var n = e.split(\".\"), r = t.split(\".\"), o = 0; o < 3; o++) {\n                var i = +n[o] || 0,\n                  a = +r[o] || 0;\n                if (a < i) return 1;\n                if (i < a) return -1;\n              }\n              return 0;\n            })(S, A.latestVersion) < 0 &&\n            console.warn(\n              \"百度移动统计微信小程序SDK已更新，为不影响您的正常使用，请到SDK下载中心 https://mtj.baidu.com/web/sdk/index 下载最新版本\"\n            );\n      })))\n    );\n  }\n  function n() {\n    return (\n      O ||\n      (O = new Promise(function(t) {\n        var e = N.system.system.match(/^iOS (\\d+)/i);\n        if (e && 13 < +e[1]) return t(\"\");\n        b.getClipboardData({\n          success: function(e) {\n            t(e.data);\n          },\n          fail: function() {\n            t();\n          }\n        });\n      }).then(function(e) {\n        if (!A.disableCircling && 36 === e.length) {\n          var t = e.match(/^mtj_(\\w{8})(\\w{4})(\\w{4})(\\w{4})(\\w{12})$/);\n          return t\n            ? ((M.circleToken = \"\"\n                .concat(t[1], \"-\")\n                .concat(t[2], \"-\")\n                .concat(t[3], \"-\")\n                .concat(t[4], \"-\")\n                .concat(t[5])),\n              (function(t) {\n                return new Promise(function(e) {\n                  b.setClipboardData({\n                    data: t,\n                    complete: function() {\n                      e();\n                    }\n                  });\n                });\n              })(\"\"))\n            : void 0;\n        }\n      }))\n    );\n  }\n  function d(t, e, n) {\n    var r = e[t];\n    e[t] = function(e) {\n      if ((n.call(this, e, t), r)) return r.apply(this, arguments);\n    };\n  }\n  function g(t) {\n    _.app.forEach(function(e) {\n      d(e, t, C[e]);\n    }),\n      (t.mtj = $),\n      B(t);\n  }\n  function m(t) {\n    _.page.forEach(function(e) {\n      d(e, t, V[e]);\n    }),\n      _.share.forEach(function(e) {\n        !(function(e, t, n) {\n          var r = t[e];\n          t[e] = function(e) {\n            var t = r && r.apply(this, arguments);\n            return n.call(this, e, t);\n          };\n        })(e, t, V[e]);\n      }),\n      Object.keys(t).forEach(function(e) {\n        \"function\" == typeof t[e] &&\n          -1 === _.page.indexOf(e) &&\n          -1 === _.share.indexOf(e) &&\n          d(e, t, V.onAction);\n      }),\n      K(t);\n  }\n  function y(t) {\n    return (\n      _.page.forEach(function(e) {\n        d(e, t.methods, V[e]);\n      }),\n      L(t)\n    );\n  }\n  function v(t) {\n    return (\n      _.page.forEach(function(e) {\n        d(e, t.methods, V[e]);\n      }),\n      F(t)\n    );\n  }\n  function j() {\n    var e;\n    !(function(e) {\n      b = e;\n    })(wx);\n    try {\n      e = require(\"./mtj-wx-sdk.config\");\n    } catch (e) {\n      return void console.error(\n        \"请把mtj-wx-sdk.config.js文件拷贝到utils目录中\"\n      );\n    }\n    e && e.appKey\n      ? ((q.key = e.appKey),\n        (A.getLocation = e.getLocation || !1),\n        (A.disableCircling = e.disableCircling || !1),\n        (A.trackStatus = !(!1 === l(x))),\n        (function() {\n          var t = l(E);\n          if (t) {\n            Object.keys(t).forEach(function(e) {\n              A[e] = t[e];\n            });\n            var e = t.updateTimestamp || 0;\n            if (+new Date() - e < 864e5) return Promise.resolve();\n          }\n          u({\n            url: \"https://hmma.baidu.com/mini.conf\",\n            method: \"POST\",\n            header: { \"content-type\": \"application/x-www-form-urlencoded\" },\n            data: { type: \"wx\", key: q.key }\n          })\n            .then(function(e) {\n              if (e && e.data) {\n                var t = e.data;\n                Object.keys(t).forEach(function(e) {\n                  A[e] = t[e];\n                }),\n                  (t.updateTimestamp = +new Date()),\n                  h(E, t);\n              } else s(\"remoteConfig\", e);\n            })\n            .catch(function(e) {\n              s(\"sendRequest\", e);\n            });\n        })(),\n        (y.prototype.constructor = L),\n        e.hasPlugin || ((App = g), (Page = m)),\n        (module.exports = { App: g, Page: m, Behavior: y, Component: v }))\n      : console.error(\"请设置mtj-wx-sdk.config.js文件中的appKey字段\");\n  }\n  var b,\n    k,\n    O,\n    S = \"1.10.10\",\n    w = \"https://hmma.baidu.com/mini.gif\",\n    _ = {\n      app: [\"onShow\", \"onHide\", \"onError\"],\n      page: [\"onShow\", \"onHide\"],\n      share: [\"onShareAppMessage\"],\n      behavior: [\"tap\"]\n    },\n    P = \"mtj_uuid\",\n    I = \"mtj_user\",\n    T = \"mtj_user_property\",\n    x = \"mtj_track_status\",\n    E = \"mtj_remote_config\",\n    A = {},\n    q = { type: 1 },\n    N = { aso: {} },\n    M = {},\n    U = 0,\n    C = {\n      onLaunch: function() {\n        f({ et: \"app\", en: \"launch\" });\n      },\n      onShow: function(e) {\n        var t = 0 < arguments.length && void 0 !== e ? e : {},\n          n = (N.aso.query || []).filter(function(e) {\n            return 0 === e.key.indexOf(\"mtj_\");\n          });\n        return (\n          (N.aso.scene = \"\" + (t.scene || \"\")),\n          t.referrerInfo && t.referrerInfo.appId\n            ? (N.aso.referrerInfo = t.referrerInfo)\n            : delete N.aso.referrerInfo,\n          (N.aso.path = t.path || \"\"),\n          (N.aso.query = Object.keys(t.query || {}).map(function(e) {\n            return { key: e, value: t.query[e] };\n          })),\n          0 < n.length &&\n            !/(^|,)mtj_/.test(Object.keys(t.query || {}).join(\",\")) &&\n            (N.aso.query = N.aso.query.concat(n)),\n          p()\n            .then(function() {\n              return (function(e) {\n                return new Promise(function(t) {\n                  if (!e) return t();\n                  b.getShareInfo({\n                    shareTicket: e,\n                    success: function(e) {\n                      delete e.errMsg, t(e);\n                    },\n                    fail: function() {\n                      t({});\n                    }\n                  });\n                });\n              })(t.shareTicket);\n            })\n            .then(function(e) {\n              e ? (N.aso.shareInfo = e) : delete N.aso.shareInfo,\n                f(Object.assign({ et: \"app\", en: \"show\" }, N));\n            })\n            .catch(function(e) {\n              s(\"app.onShow\", e);\n            })\n        );\n      },\n      onHide: function() {\n        (O = null), f({ et: \"app\", en: \"hide\" });\n      },\n      onError: function(e) {\n        var t = i(e, \"Object\") ? JSON.stringify(o(e)) : \"\" + e;\n        f({ et: \"app\", en: \"error\", ep: { ex: t } });\n      }\n    },\n    J = -1,\n    R = -1,\n    D = 0,\n    V = {\n      onShow: function() {\n        var e = getCurrentPages(),\n          t = e[e.length - 1];\n        return (\n          (q.path = t.route),\n          (q.query = Object.keys(t.options)\n            .map(function(e) {\n              return { key: e, value: t.options[e] };\n            })\n            .filter(function(e) {\n              return (\n                \"mtj_qrid\" !== e.key &&\n                \"mtj_lkid\" !== e.key &&\n                \"mtj_shuuid\" !== e.key\n              );\n            })),\n          p()\n            .then(n)\n            .then(function() {\n              f(Object.assign({ et: \"page\", en: \"show\" }, N));\n            })\n            .catch(function(e) {\n              s(\"page.onShow\", e);\n            })\n        );\n      },\n      onHide: function() {\n        !(function(e, t) {\n          f({ et: \"page\", en: e, ep: t });\n        })(\"hide\");\n      },\n      onShareAppMessage: function(e, t) {\n        var n = 1 < arguments.length && void 0 !== t ? t : {},\n          r = { from: e.from, path: n.path };\n        if (!r.path) {\n          var o = q.query\n            .map(function(e) {\n              return e.key + \"=\" + e.value;\n            })\n            .join(\"&\");\n          r.path = q.path + (o ? \"?\" + o : \"\");\n        }\n        n.title && (r.title = \"\" + n.title),\n          e.target && (r.target = JSON.stringify(e.target)),\n          f(Object.assign({ et: \"share\", en: \"action\", ep: r }, N));\n        var i = N.aso.query.filter(function(e) {\n            return \"mtj_shuuid\" === e.key;\n          }),\n          a = i[0] ? i[0].value.split(\"_\") : [];\n        q.uuid !== a[a.length - 1] && a.push(q.uuid);\n        var c = a.slice(Math.max(0, a.length - 3)).join(\"_\");\n        return (\n          (n.path = (function(e, t, n) {\n            var r =\n              0 <\n              (e = e\n                .replace(new RegExp(t + \"=[^&]*\", \"g\"), \"\")\n                .replace(/(\\?|&)&/g, \"$1\")\n                .replace(/(\\?|&)$/g, \"\")).indexOf(\"?\")\n                ? \"&\"\n                : \"?\";\n            return e + r + t + \"=\" + encodeURIComponent(n);\n          })(r.path, \"mtj_shuuid\", c)),\n          n\n        );\n      },\n      onAction: function(e, t) {\n        if (e && e.type && e.currentTarget)\n          if (\"tap\" !== e.type) {\n            if (\"touchmove\" === e.type && e.touches instanceof Array) {\n              if (-1 !== J) return;\n              if (3 === e.touches.length) {\n                if (((D += 1), clearTimeout(R), 3 === D))\n                  return (\n                    (M.circleByThreeFingers = !0),\n                    (M.circleToken = void 0),\n                    void f(Object.assign({ et: \"page\", en: \"show\" }, N))\n                  );\n                J = setTimeout(function() {\n                  (J = -1),\n                    (R = setTimeout(function() {\n                      D = 0;\n                    }, 500));\n                }, 1e3);\n              }\n            }\n          } else {\n            var n = [{ key: \"xpath\", value: \"#\" + (e.currentTarget.id || t) }];\n            f(Object.assign({ et: \"behavior\", en: \"tap\", ep: { data: n } }, N));\n          }\n      }\n    },\n    $ = {\n      trackEvent: function(e, t) {\n        var n = 1 < arguments.length && void 0 !== t ? t : {};\n        if (\n          !(function(e) {\n            return i(e, \"String\") && /^[a-z][a-z0-9_]{0,31}$/.test(e);\n          })(e)\n        )\n          return Promise.reject(new Error(\"事件名称不合法\"));\n        var r = Object.keys(n)\n          .filter(function(e) {\n            return (\n              (function(e) {\n                return i(e, \"String\") && /^[a-z0-9_]{1,32}$/.test(e);\n              })(e) &&\n              (function(e) {\n                return i(e, \"String\") || i(e, \"Number\");\n              })(n[e])\n            );\n          })\n          .map(function(e) {\n            return {\n              key: \"\" + e,\n              value: \"\" + n[e],\n              type: i(n[e], \"String\") ? \"string\" : \"number\"\n            };\n          });\n        return p()\n          .then(function() {\n            f(Object.assign({ et: \"event\", en: \"\" + e, ep: { data: r } }, N));\n          })\n          .catch(function(e) {\n            s(\"trackEvent\", e);\n          });\n      },\n      setTrackStatus: function(e) {\n        i(e, \"Boolean\") && ((A.trackStatus = e), h(x, e));\n      },\n      setUserInfo: function(e) {\n        var t = 0 < arguments.length && void 0 !== e ? e : {},\n          n = t.tel,\n          r = t.openId;\n        return p()\n          .then(function() {\n            var e = l(I),\n              t = i(e, \"Object\") ? e : {};\n            a(n) && (t.tel = N.user.tel = n.substr(n.length - 11)),\n              c(r) && (t.openId = N.user.openId = r),\n              (t.tel || t.openId) && h(I, t),\n              i(n, \"Undefined\") ||\n                a(n) ||\n                console.error(\"手机号 \".concat(n, \" 不合法\")),\n              i(r, \"Undefined\") ||\n                c(r) ||\n                console.error(\"openid \".concat(r, \" 不合法\"));\n          })\n          .catch(function(e) {\n            s(\"setUserInfo\", e);\n          });\n      },\n      setUserId: function(o) {\n        return Promise.resolve().then(function() {\n          if (!(i(o, \"String\") || (i(o, \"Number\") && Number.isFinite(o))))\n            return Promise.reject(new Error(\"userId只能是字符串或数字\"));\n          var e = \"\" + o,\n            t = l(T),\n            n = i(t, \"Object\") ? t : {};\n          if (!n.uid_ || n.uid_[0] !== e) {\n            (n.uid_ = [e, \"1\"]), h(T, n), (N.userProperty = JSON.stringify(n));\n            var r = [{ key: \"uid\", value: e }];\n            return p()\n              .then(function() {\n                f(\n                  Object.assign(\n                    { et: \"api\", en: \"setUserId\", ep: { data: r } },\n                    N\n                  )\n                );\n              })\n              .catch(function(e) {\n                s(\"setUserId\", e);\n              });\n          }\n        });\n      },\n      setUserProperty: function(o) {\n        return Promise.resolve().then(function() {\n          var e = l(T),\n            n = i(e, \"Object\") ? e : {};\n          if (i(o, \"Null\"))\n            Object.keys(n).forEach(function(e) {\n              \"_\" !== e.charAt(0) &&\n                \"_\" !== e.charAt(e.length - 1) &&\n                delete n[e];\n            });\n          else if (!i(o, \"Object\"))\n            return Promise.reject(new Error(\"userProperty必须是对象\"));\n          var r = Object.keys(n).filter(function(e) {\n            return \"_\" !== e.charAt(0) && \"_\" !== e.charAt(e.length - 1);\n          }).length;\n          Object.keys(o || {}).forEach(function(e) {\n            var t = o[e];\n            \"\" !== e &&\n              \"_\" !== e.charAt(0) &&\n              \"_\" !== e.charAt(e.length - 1) &&\n              (i(t, \"Null\")\n                ? n[e] && (delete n[e], r--)\n                : !(i(t, \"String\") || (i(t, \"Number\") && Number.isFinite(t))) ||\n                  256 < e.length ||\n                  256 < (\"\" + t).length ||\n                  (!n[e] && 100 <= r) ||\n                  (n[e] || r++, (n[e] = [t, \"1\"])));\n          }),\n            h(T, n),\n            (N.userProperty = JSON.stringify(n));\n        });\n      }\n    },\n    B = App,\n    K = Page,\n    L = Behavior,\n    F = Component;\n  return j(), (e.init = j), e;\n})({});\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAmBA;AACA;AACA;AACA;AAzBA;AA2BA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAZA;AAcA;AACA;AACA;AAAA;;;;;;;;;;;;;AC/DA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;;;;;;;;;;;;;ACbA;AAAA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAFA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAFA;AAWA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAlBA;AAoBA;AAzBA;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAFA;AAWA;AA1JA;AAfA;;;;;;;;;;;;ACFA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;;;;;;;;;;;;ACJA;AACA;AACA;AAAA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAGA;AACA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AASA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAiBA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAJA;AAHA;AAUA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;AAOA;AAIA;AACA;AACA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAPA;AAUA;AACA;AACA;AACA;AAhBA;AAkBA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AAEA;AACA;AACA;AAEA;AAUA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAIA;AAEA;AACA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AAGA;AACA;AAAA;AACA;AAEA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AAAA;AAMA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAJA;AAOA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAJA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBA;AAAA;AAjBA;AAkBA;AAAA;AAlBA;AAAA;AAAA;AAsBA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAOA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AArDA;AArBA;AAAA;AAAA;AAAA;AAgFA;AACA;AAAA;AAEA;AAIA;AAAA;AAAA;AAAA;AACA;AAEA;AAKA;AAIA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAEA;AAQA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAIA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AA3FA;AA/EA;AA6KA;AACA;AACA;AAEA;AACA;AAGA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AAEA;AAAA;AAEA;AASA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAEA;AAGA;AAGA;AACA;AACA;AACA;AACA;AACA;AAUA;AAGA;AACA;AApHA;AA5KA;AAAA;AAAA;AAAA;AAsSA;AACA;;;;A","sourceRoot":""}